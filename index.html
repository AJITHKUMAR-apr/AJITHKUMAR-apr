<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Anu & Aji ‚Äî Valentine's Surprise</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#11021d; --bg2:#29102a;
      --accent:#ff6b9a; --accent-2:#ffb3c7; --muted:#ffdfe8;
      --card: rgba(255,255,255,0.03);
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#fff;background:linear-gradient(180deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased}
    .container{max-width:1100px;margin:28px auto;padding:26px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 12px 40px rgba(0,0,0,0.6);position:relative;overflow:hidden}
    header{display:flex;align-items:center;justify-content:space-between;gap:18px}
    .brand{display:flex;gap:12px;align-items:center}
    .mark{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:20px;color:#fff}
    nav a{color:rgba(255,255,255,0.9);text-decoration:none;margin-left:12px;font-weight:600}
    .hero{display:grid;grid-template-columns:1fr 380px;gap:26px;align-items:center;margin-top:20px}
    @media(max-width:920px){.hero{grid-template-columns:1fr}.hero-right{order:2}}
    h1{font-family:'Playfair Display',serif;font-size:2.4rem;margin:0 0 8px}
    .lead{color:var(--muted);margin-bottom:12px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.45);text-align:center}
    .cta-row{display:flex;gap:12px;justify-content:center;margin-top:12px;flex-wrap:wrap}
    .btn{padding:12px 18px;border-radius:999px;border:none;font-weight:800;cursor:pointer}
    .btn.yes{background:linear-gradient(180deg,var(--accent),#ff3b78);color:#fff}
    .btn.no{background:linear-gradient(180deg,#ffdee6,#ffd0df);color:#6b0020}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:18px}
    @media(max-width:920px){.grid-2{grid-template-columns:1fr}}
    .section{background:var(--card);padding:16px;border-radius:10px}
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    @media(max-width:920px){.gallery{grid-template-columns:repeat(2,1fr)}}
    .photo{height:110px;border-radius:8px;background:linear-gradient(135deg, rgba(255,107,154,0.12), rgba(255,200,220,0.04));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    .prompt{position:fixed;left:14px;top:14px;background:rgba(0,0,0,0.44);padding:10px 12px;border-radius:10px;color:#fff;backdrop-filter:blur(6px);font-weight:700;display:none;z-index:60}
    .hearts{position:absolute;inset:0;pointer-events:none;overflow:hidden;border-radius:16px}
    .heart{position:absolute;width:18px;height:18px;opacity:0.95;animation:float linear infinite}
    @keyframes float{from{transform:translateY(40vh) rotate(0deg);opacity:0}20%{opacity:0.9}to{transform:translateY(-120vh) rotate(360deg);opacity:0}}
    canvas.confetti{position:absolute;inset:0;pointer-events:none;border-radius:16px}
    footer{margin-top:20px;text-align:center;color:rgba(255,255,255,0.85);font-size:0.92rem}
    /* helpers */
    .muted{color:var(--muted)}
    img.responsive{width:100%;height:100%;object-fit:cover;border-radius:8px;display:block}
  </style>
</head>
<body>
  <div class="prompt" id="prompt">Tap anywhere to start the soothing music ‚ñ∂Ô∏è</div>

  <main class="container" role="main" aria-labelledby="title">
    <header>
      <div class="brand">
        <div class="mark" aria-hidden="true">A‚ù£Ô∏èA</div>
        <div>
          <div style="font-weight:700">Anu & Aji</div>
          <div style="font-size:0.86rem;color:var(--muted)">Wedding: 23rd Aug 2026</div>
        </div>
      </div>
      <nav aria-label="Main navigation">
        <a href="#story">Story</a>
        <a href="#moments">Moments</a>
        <a href="#rsvp">RSVP</a>
      </nav>
    </header>

    <section class="hero" aria-labelledby="title">
      <div class="hero-left">
        <h1 id="title">Anu ‚Äî will you be my valentine?</h1>
        <div class="lead">A small page from Aji celebrating love, our memories, and the promise of forever. Save the date: 23rd Aug 2026.</div>

        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <a class="btn yes" href="#rsvp" style="text-decoration:none;color:#fff">Celebrate Together</a>
          <a class="btn" href="#story" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff">Read Our Story</a>
        </div>

        <p class="muted" style="margin-top:14px">Below is a playful question ‚Äî choose carefully üòâ</p>
      </div>

      <aside class="hero-right card" aria-labelledby="cta-title">
        <div id="cta-title" style="font-weight:800;font-size:1.1rem">Will you be my valentine?</div>
        <div class="muted" style="margin-top:8px">Anu & Aji ‚Äî 23rd Aug 2026</div>

        <!-- hero image: replace resources/hero.jpg -->
        <div style="margin:12px 0;border-radius:10px;overflow:hidden;height:150px">
          <img class="responsive" src="resources/hero.jpg"
               alt="Hero photo placeholder"
               onerror="this.onerror=null;this.src='https://via.placeholder.com/600x350?text=hero+photo'">
        </div>

        <div class="cta-row" role="group" aria-label="Yes or No">
          <button id="yesBtn" class="btn yes" aria-label="Yes">Yes ‚Äî of course</button>
          <button id="noBtn" class="btn no" aria-label="No" aria-disabled="true" tabindex="-1">No</button>
        </div>

        <div style="margin-top:10px;font-size:0.92rem;color:var(--muted)">The No button is shy ‚Äî it loves to run away üòÑ</div>
      </aside>
    </section>

    <div class="grid-2">
      <section id="story" class="section" aria-labelledby="story-h">
        <h3 id="story-h" style="margin-top:0;font-family:'Playfair Display',serif">Our Story</h3>
        <p class="muted">From little smiles to unforgettable moments ‚Äî this page is a small celebration of us. I wrote this for you, Anu, to tell you how much I love you and how excited I am for our future.</p>
        <p class="muted">Everything here is a placeholder you can edit later ‚Äî gallery photos in resources/, text, and colors.</p>
      </section>

      <section id="moments" class="section" aria-labelledby="moments-h">
        <h3 id="moments-h" style="margin-top:0;font-family:'Playfair Display',serif">Moments</h3>
        <div class="gallery" aria-hidden="false">
          <!-- Replace these with resources/photo1.jpg ... resources/photo6.jpg -->
          <div class="photo"><img alt="moment 1" class="responsive" src="resources/photo1.jpg" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x250?text=photo1'"></div>
          <div class="photo"><img alt="moment 2" class="responsive" src="resources/photo2.jpg" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x250?text=photo2'"></div>
          <div class="photo"><img alt="moment 3" class="responsive" src="resources/photo3.jpg" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x250?text=photo3'"></div>
          <div class="photo"><img alt="moment 4" class="responsive" src="resources/photo4.jpg" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x250?text=photo4'"></div>
          <div class="photo"><img alt="moment 5" class="responsive" src="resources/photo5.jpg" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x250?text=photo5'"></div>
          <div class="photo"><img alt="moment 6" class="responsive" src="resources/photo6.jpg" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x250?text=photo6'"></div>
        </div>
      </section>
    </div>

    <div class="grid-2" style="margin-top:16px">
      <section id="timeline" class="section" aria-labelledby="timeline-h">
        <h3 id="timeline-h" style="margin-top:0;font-family:'Playfair Display',serif">Timeline</h3>
        <div style="display:flex;flex-direction:column;gap:10px">
          <div><strong>First Meet</strong><div class="muted">The coffee that changed everything.</div></div>
          <div><strong>First Trip</strong><div class="muted">A little adventure, lots of laughter.</div></div>
          <div><strong>Will you be my valentine?</strong><div class="muted">Today ‚Äî let's celebrate us.</div></div>
        </div>
      </section>

      <section id="rsvp" class="section" aria-labelledby="rsvp-h">
        <h3 id="rsvp-h" style="margin-top:0;font-family:'Playfair Display',serif">RSVP & Love Notes</h3>
        <p class="muted">Leave a short love note for Anu (local only ‚Äî demo).</p>
        <form id="noteForm" onsubmit="return false" style="margin-top:8px">
          <textarea id="noteText" rows="4" placeholder="Dear Anu..." style="width:100%;padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff"></textarea>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button id="saveNote" class="btn yes" style="flex:0 0 auto">Send love</button>
            <button id="clearNote" class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.06)">Clear</button>
          </div>
        </form>
        <div id="notesList" style="margin-top:12px"></div>
      </section>
    </div>

    <footer>Made with love by Aji ‚Äî 23rd Aug 2026</footer>

    <div class="hearts" id="hearts" aria-hidden="true"></div>
    <canvas class="confetti" id="confettiCanvas" aria-hidden="true"></canvas>
  </main>

  <!-- YouTube IFrame API (plays Perfect on Yes click) -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
  // Configuration
  const YT_VIDEO_ID = '2Vv-BfVoq4g'; // Ed Sheeran - Perfect

  // Elements
  const yesBtn = document.getElementById('yesBtn');
  const noBtn = document.getElementById('noBtn');
  const prompt = document.getElementById('prompt');
  const heartsContainer = document.getElementById('hearts');
  const confettiCanvas = document.getElementById('confettiCanvas');
  const noteText = document.getElementById('noteText');
  const saveNote = document.getElementById('saveNote');
  const clearNote = document.getElementById('clearNote');
  const notesList = document.getElementById('notesList');

  // Notes (local demo)
  const notes = [];
  saveNote.addEventListener('click', () => {
    const v = noteText.value.trim();
    if (!v) return alert('Write a short love note :)');
    notes.unshift({text: v, time: new Date().toLocaleString()});
    renderNotes();
    noteText.value = '';
  });
  clearNote.addEventListener('click', () => { noteText.value = ''; });
  function renderNotes(){
    notesList.innerHTML = notes.map(n => '<div style="padding:10px;border-radius:8px;margin-bottom:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));"><div style="color:#ffdfe8">'+escapeHtml(n.text)+'</div><div style="font-size:0.8rem;color:rgba(255,255,255,0.6);margin-top:6px">'+n.time+'</div></div>').join('');
  }
  function escapeHtml(s){ return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  // --- No button: playful dodge, not clickable/focusable ---
  noBtn.setAttribute('tabindex','-1');
  noBtn.setAttribute('aria-disabled','true');

  function getCardBounds(){
    const card = document.querySelector('.hero-right');
    return card.getBoundingClientRect();
  }

  function moveNoRandomly(){
    const bounds = getCardBounds();
    const rect = noBtn.getBoundingClientRect();
    const maxX = Math.max(0, bounds.width - rect.width - 8);
    const maxY = Math.max(0, bounds.height - rect.height - 8);
    const x = Math.random() * maxX;
    const y = Math.random() * maxY;
    noBtn.style.transition = 'transform 220ms cubic-bezier(.2,.9,.2,1)';
    noBtn.style.transform = `translate(${x}px, ${y}px)`;
  }

  noBtn.addEventListener('mouseenter', moveNoRandomly);
  noBtn.addEventListener('mousemove', () => { if (Math.random() < 0.6) moveNoRandomly(); }, {passive:true});
  noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNoRandomly(); }, {passive:false});
  noBtn.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation();
    noBtn.animate([{transform: noBtn.style.transform + ' translateX(0)'},{transform: noBtn.style.transform + ' translateX(-10px)'},{transform: noBtn.style.transform + ' translateX(8px)'},{transform: noBtn.style.transform + ' translateX(0)'}], {duration:420, easing:'ease-out'});
    setTimeout(moveNoRandomly, 260);
  });
  setInterval(()=> { if (Math.random() < 0.55) moveNoRandomly(); }, 2600);

  // --- Ambient pad via WebAudio ---
  let audioCtx, masterGain, oscA, oscB, lfo, filter;
  function createAmbient(){
    try { audioCtx = new (window.AudioContext || window.webkitAudioContext)(); } catch(e) { console.warn('WebAudio not supported'); return; }
    masterGain = audioCtx.createGain(); masterGain.gain.value = 0.0001; masterGain.connect(audioCtx.destination);
    filter = audioCtx.createBiquadFilter(); filter.type='lowpass'; filter.frequency.value = 900; filter.Q.value = 0.6; filter.connect(masterGain);

    oscA = audioCtx.createOscillator(); oscA.type='sine'; oscA.frequency.value = 220;
    const gA = audioCtx.createGain(); gA.gain.value = 0.5; oscA.connect(gA).connect(filter);

    oscB = audioCtx.createOscillator(); oscB.type='sine'; oscB.frequency.value = 220 * Math.pow(2, 4/120);
    const gB = audioCtx.createGain(); gB.gain.value = 0.45; oscB.connect(gB).connect(filter);

    lfo = audioCtx.createOscillator(); lfo.type='sine'; lfo.frequency.value = 0.07;
    const lfoGain = audioCtx.createGain(); lfoGain.gain.value = 200; lfo.connect(lfoGain); lfoGain.connect(filter.frequency);

    const now = audioCtx.currentTime; oscA.start(now); oscB.start(now); lfo.start(now);
    masterGain.gain.cancelScheduledValues(now); masterGain.gain.setValueAtTime(0.0001, now);
    masterGain.gain.exponentialRampToValueAtTime(0.08, now + 3.2);
  }

  function fadeOutAmbient(duration=1.0){
    if (!audioCtx || !masterGain) return;
    const now = audioCtx.currentTime;
    masterGain.gain.cancelScheduledValues(now);
    masterGain.gain.setValueAtTime(masterGain.gain.value, now);
    masterGain.gain.exponentialRampToValueAtTime(0.0001, now + duration);
    setTimeout(()=>{ try{ oscA.stop(); oscB.stop(); lfo.stop(); }catch(e){} }, (duration+0.15)*1000);
  }

  window.addEventListener('load', async () => {
    createAmbient();
    if (audioCtx && audioCtx.state === 'suspended') {
      try { await audioCtx.resume(); prompt.style.display='none'; } catch(e) { prompt.style.display='flex'; }
    } else prompt.style.display='none';
  });

  function ensureAudioStarted(){
    if (!audioCtx) { createAmbient(); return; }
    if (audioCtx.state === 'suspended') {
      audioCtx.resume().then(()=>{ prompt.style.display='none'; }).catch(()=>{ prompt.style.display='flex'; });
    } else prompt.style.display='none';
  }
  document.addEventListener('click', ()=>ensureAudioStarted(), {once:false});
  setTimeout(()=>{ if (audioCtx && audioCtx.state === 'suspended') { prompt.style.display='flex'; const onStart=()=>{ ensureAudioStarted(); prompt.style.display='none'; document.removeEventListener('click', onStart); }; document.addEventListener('click', onStart, {once:true}); } }, 1200);

  // --- YouTube player for "Perfect" (visually hidden) ---
  const ytContainer = document.createElement('div'); ytContainer.id = 'ytPlayer'; ytContainer.style.position='absolute'; ytContainer.style.left='-9999px'; document.body.appendChild(ytContainer);
  let ytPlayer;
  window.onYouTubeIframeAPIReady = function(){ ytPlayer = new YT.Player('ytPlayer', {height:'1',width:'1',videoId:YT_VIDEO_ID,playerVars:{autoplay:0,controls:0,rel:0,modestbranding:1,playsinline:1}}); };

  // --- Yes button action: fade ambient, confetti, hearts, and play "Perfect" ---
  yesBtn.addEventListener('click', async (e) => {
    e.preventDefault(); e.stopPropagation();
    if (audioCtx && audioCtx.state === 'suspended') await audioCtx.resume();
    fadeOutAmbient(1.0);
    burstHearts(30);
    startConfetti();

    if (typeof YT !== 'undefined' && ytPlayer) {
      try { ytPlayer.setVolume(90); ytPlayer.playVideo(); } catch(err){ window.open('https://www.youtube.com/watch?v='+YT_VIDEO_ID,'_blank'); }
    } else window.open('https://www.youtube.com/watch?v='+YT_VIDEO_ID,'_blank');

    showCongrats();
  });

  function showCongrats(){
    const el = document.createElement('div');
    el.style.position='fixed'; el.style.left='50%'; el.style.top='50%'; el.style.transform='translate(-50%,-50%)';
    el.style.zIndex=80; el.style.padding='22px'; el.style.borderRadius='12px'; el.style.background='linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
    el.style.boxShadow='0 18px 40px rgba(0,0,0,0.6)'; el.style.textAlign='center'; el.style.color='#fff';
    el.innerHTML = '<div style="font-size:1.4rem;font-weight:800">Yes! üíç</div><div style="margin-top:8px;color:#ffdfe8">Anu ‚Äî will you marry me?<br>23 Aug 2026</div><div style="margin-top:12px;font-size:0.95rem;color:#ffdfe8">Playing "Perfect" now...</div>';
    document.body.appendChild(el);
    setTimeout(()=> { el.style.transition='opacity 600ms'; el.style.opacity='0'; setTimeout(()=>el.remove(),650); }, 7000);
  }

  // --- Visuals: hearts & confetti ---
  function createHeart(color='#ff6b9a'){
    const svg = document.createElementNS('http://www.w3.org/2000/svg','svg');
    svg.setAttribute('width','18'); svg.setAttribute('height','18'); svg.setAttribute('viewBox','0 0 24 24');
    svg.innerHTML = '<path fill="'+color+'" d="M12 21s-7.33-4.75-9.17-7.03C.9 11.9 2.02 7.5 5.5 6.2 7.1 5.6 8.9 6 10 7.2 11.1 6 12.9 5.6 14.5 6.2c3.48 1.3 4.6 5.7 2.67 7.77C19.33 16.25 12 21 12 21z"/>';
    return svg;
  }

  function burstHearts(count=12){
    for (let i=0;i<count;i++){
      const h = createHeart(['#ff6b9a','#ff3b78','#ffd6e0'][Math.floor(Math.random()*3)]);
      h.classList.add('heart');
      const left = Math.random()*100;
      h.style.left = left + '%';
      h.style.bottom = (Math.random()*20 - 10) + 'vh';
      h.style.animationDuration = (5 + Math.random()*6) + 's';
      heartsContainer.appendChild(h);
      setTimeout(()=> h.remove(), 9000);
    }
  }
  setInterval(()=> burstHearts(4), 3800);

  function startConfetti(){
    const canvas = confettiCanvas;
    if (!canvas.getContext) return;
    const ctx = canvas.getContext('2d');
    let W = canvas.width = window.innerWidth, H = canvas.height = window.innerHeight;
    const pieces = [], colors=['#ff6b9a','#ffd6e0','#ffb3c7','#fff'];
    function reset(p){ p.x = Math.random()*W; p.y = -20 - Math.random()*H*0.2; p.s = 6 + Math.random()*8; p.c = colors[Math.floor(Math.random()*colors.length)]; p.sp = 1 + Math.random()*3; p.r = Math.random()*360; p.vx = (Math.random()-0.5)*2; p.vy = p.sp; }
    for (let i=0;i<140;i++){ const p={}; reset(p); pieces.push(p); }
    let running = true;
    function frame(){
      ctx.clearRect(0,0,W,H);
      for (const p of pieces){ p.x += p.vx; p.y += p.vy; p.r += 6; ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.r*Math.PI/180); ctx.fillStyle = p.c; ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s); ctx.restore(); if (p.y > H+50) reset(p); }
      if (running) requestAnimationFrame(frame);
    }
    frame();
    setTimeout(()=>{ running=false; ctx.clearRect(0,0,W,H); }, 8500);
    window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; });
  }

  // --- Fallback/UI polish ---
  setTimeout(()=>{ if (typeof YT === 'undefined') {
      const info = document.createElement('div'); info.style.fontSize='0.9rem'; info.style.color='#ffdfe8'; info.style.marginTop='10px';
      info.innerHTML = 'If music does not start automatically, <a href="https://www.youtube.com/watch?v='+YT_VIDEO_ID+'" target="_blank" style="color:#fff;text-decoration:underline">click here to play "Perfect"</a>.';
      document.querySelector('.container').appendChild(info);
  } }, 2000);

  // small keyboard support for Yes
  yesBtn.addEventListener('keydown', (e)=>{ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); yesBtn.click(); } });
  </script>
</body>
</html>
